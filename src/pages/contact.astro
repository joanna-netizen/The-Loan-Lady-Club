---
import Layout from '../layouts/Layout.astro';

// Form posts to /api/contact (sends email via Gmail using your Google App Password)
const showThankYou = Astro.url.searchParams.get('sent') === '1';
---

<Layout
  title="Contact Joanna Perry | Sacramento Mortgage Broker | The Loan Lady Club NMLS 243348"
  description="Schedule a free 30-minute consultation with Joanna Perry, Sacramento mortgage broker. Call, email, or book online. NMLS #243348. The Loan Lady Club."
>

  <!-- Scheduling CTA -->
  <section class="py-20 bg-white">
    <div class="max-w-3xl mx-auto px-6 lg:px-8 text-center">
      <p class="text-warm-gold font-medium mb-4">Step 1 Starts Here</p>
      <h1 class="font-heading text-5xl text-charcoal mb-6 leading-tight">
        Let's Have a Conversation
      </h1>
      <p class="text-lg text-charcoal opacity-70 mb-4 leading-relaxed">
        The first step is a free 30-minute structured phone consultation. We will review your goals, your situation, and what programs may be available to you. No credit pull. No obligation. Just honest education.
      </p>
      <p class="text-sm text-charcoal opacity-50 mb-10">
        After the call, I’ll tell you exactly what I’d do next if you want to move forward. If you are just here to plan and get clear, that’s a good choice too.
      </p>
      <a
        href="https://link.theradcrm.com/widget/booking/3NaG5jwiaAoLvl0W0qNN"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-block bg-warm-gold text-white px-10 py-4 rounded-sm font-medium hover:opacity-90 transition text-lg"
      >
        Schedule Your Free Consultation
      </a>
      <p class="mt-4 text-sm text-charcoal opacity-60">
        Prefer to call? <a href="tel:+19167088555" class="text-warm-gold hover:underline">(916) 708-8555</a>
      </p>
    </div>
  </section>

  <!-- Divider -->
  <div class="max-w-3xl mx-auto px-6">
    <div class="border-t border-warm-taupe opacity-30"></div>
  </div>

  <!-- Contact Form -->
  <section class="bg-white py-20">
    <div class="max-w-2xl mx-auto px-6">
      <div class="text-center mb-12">
        <h2 class="font-heading text-3xl text-charcoal mb-4">Send a Message</h2>
        <p class="text-charcoal opacity-70">
          Prefer to write it out? Send a message and I will get back to you directly.
        </p>
      </div>

      {showThankYou && (
        <div class="mb-8 p-4 bg-warm-cream border border-warm-gold/30 rounded-md text-center text-charcoal">
          <p class="font-medium text-warm-gold">Thank you for your message.</p>
          <p class="text-sm mt-1 opacity-80">I will get back to you soon.</p>
        </div>
      )}

      <form
        class="bg-warm-cream p-8 rounded-md shadow-sm"
        action="/api/contact"
        method="POST"
      >
        <div class="mb-6">
          <label for="name" class="block text-charcoal font-medium mb-2">Name</label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full px-4 py-3 rounded-sm border border-warm-taupe bg-white text-charcoal focus:outline-none focus:ring-2 focus:ring-warm-gold/50"
            placeholder="Your name"
          />
        </div>
        <div class="mb-6">
          <label for="email" class="block text-charcoal font-medium mb-2">Email</label>
          <input
            type="email"
            id="email"
            name="email"
            required
            class="w-full px-4 py-3 rounded-sm border border-warm-taupe bg-white text-charcoal focus:outline-none focus:ring-2 focus:ring-warm-gold/50"
            placeholder="your@email.com"
          />
        </div>
        <div class="mb-6">
          <label for="phone" class="block text-charcoal font-medium mb-2">Phone</label>
          <input
            type="tel"
            id="phone"
            name="phone"
            class="w-full px-4 py-3 rounded-sm border border-warm-taupe bg-white text-charcoal focus:outline-none focus:ring-2 focus:ring-warm-gold/50"
            placeholder="(916) 555-1234"
          />
        </div>
        <div class="mb-8">
          <label for="message" class="block text-charcoal font-medium mb-2">Message</label>
          <textarea
            id="message"
            name="message"
            rows="5"
            required
            class="w-full px-4 py-3 rounded-sm border border-warm-taupe bg-white text-charcoal focus:outline-none focus:ring-2 focus:ring-warm-gold/50 resize-y"
            placeholder="How can I help?"
          ></textarea>
        </div>
        <button
          type="submit"
          class="w-full bg-warm-gold text-white px-8 py-3 rounded-sm font-medium hover:opacity-90 transition-opacity"
        >
          Send message
        </button>
      </form>

      <!-- Contact Info -->
      <div class="mt-12 text-center">
        <p class="text-charcoal mb-2">
          <strong>Phone:</strong> <a href="tel:+19167088555" class="text-warm-gold hover:underline">(916) 708-8555</a>
        </p>
        <p class="text-charcoal mb-2">
          <strong>Email:</strong> <a href="mailto:joanna@loanlady.club" class="text-warm-gold hover:underline">joanna@loanlady.club</a>
        </p>
        <p class="text-charcoal text-sm opacity-60">
          9278 Madison Ave, Orangevale, CA 95662
        </p>
      </div>
    </div>
  </section>

  <!-- Floating Call button (Contact page only) -->
  <a
    href="tel:+19167088555"
    aria-label="Call now"
    class="fixed bottom-6 right-6 z-40 w-16 h-16 md:w-20 md:h-20 rounded-full overflow-hidden shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-warm-gold focus:ring-offset-2"
  >
    <img
      src="/images/joanna-phone.png"
      alt=""
      class="w-full h-full object-cover"
      width="80"
      height="80"
    />
  </a>

</Layout>